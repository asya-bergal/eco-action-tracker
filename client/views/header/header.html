<template name="header" class="header-container">
    <div class="title">
        <a href="/">{{title}}</a>
    </div>
    {{#if currentUser}}
        <div class="searchBar">{{> search}}</div>
    {{/if}}
    <div class="button-container">
        {{#if currentUser}}
            <span class="btn header-item">Total Points: {{currentUser.profile.points}}</span>
            <span class="btn header-item"><a href="/user/profile">Profile</a></span>
            <span class="btn header-item logout">Logout</span>
        {{else}}
            <span>{{> login}}</span>
        {{/if}}
    </div>
</template>

<template name="search">
    <div class="searchBox">
        <form class="searchInput form-control" data-toggle="popover" data-placement="bottom" data-content='' trigger="focus ">
            {{> EasySearch.Input index=groupsIndex }}
        </form>

        
        {{#EasySearch.IfInputEmpty index=groupsIndex }}
        {{else}}
            <div class="searchResults">
                {{#EasySearch.Each index=groupsIndex }}
                    <div class="groupName"><a href="/group/{{_id}}">{{name}}</a></div>
                {{/EasySearch.Each}}
            </div>
        {{/EasySearch.IfInputEmpty}}

<!--
    {{#EasySearch.IfSearching index=groupsIndex }}
      <div>Searching</div>
    {{/EasySearch.IfSearching }}
-->
    </div>
    
    <script>
    $(document).ready(function(){
        $('[data-toggle="popover"]').popover();   
    });
    </script>
</template>